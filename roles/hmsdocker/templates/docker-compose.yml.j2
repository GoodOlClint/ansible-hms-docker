include:
{# Default functions are here because the ".dest" attribute is only available during non-check mode or if the file already exists (which is an issue when creating for the first time) #}
{% for file in compose_files_created.results %}
  - {{ file.dest | default(compose_dir.path + '/' + file.item + '.yml') }}
{% endfor %}
{% if watchtower_compose_file_path is defined | default(False) %}
  - {{ watchtower_compose_file_path.dest | default(compose_dir.path + '/watchtower.yml') }}
{% endif %}
{% if cloudflare_compose_file_path is defined | default(False) %}
  - {{ cloudflare_compose_file_path.dest | default(compose_dir.path + '/cloudflare.yml') }}
{% endif %}
{% if flaresolverr_compose_file_path is defined | default(False) %}
  - {{ flaresolverr_compose_file_path.dest | default(compose_dir.path + '/flaresolverr.yml') }}
{% endif %}
{% if authentik_compose_file_path is defined | default(False) %}
  - {{ authentik_compose_file_path.dest | default(compose_dir.path + '/authentik.yml') }}
{% endif %}

networks:
  download_net:
    driver: bridge
    attachable: false
  media_net:
    driver: bridge
    attachable: false
  proxy_net:
    driver: bridge
    attachable: true
